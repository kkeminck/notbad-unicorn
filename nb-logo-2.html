<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>NB Logo 2 — Unicorn</title>

  <!-- Unicorn runtime -->
  <script src="https://cdn.jsdelivr.net/gh/hiunicornstudio/unicornstudio.js@v1.4.30/dist/unicornStudio.umd.js"></script>

  <style>
    html, body { height: 100%; margin: 0; background: transparent; }
    #host { position: fixed; inset: 0; overflow: hidden; }
    #host > canvas, #host > * { position: absolute; inset: 0; }
    body, #host { cursor: auto; }
  </style>
</head>
<body>
  <div id="host" aria-label="Animated notbad logo 2"></div>

  <script>
    (function(){
      // Use ABSOLUTE URL to avoid any relative-path surprises in iframes
      const FILE_URL = "https://kkeminck.github.io/notbad-unicorn/nb-logo-2.json";

      function ready(cb){
        (window.UnicornStudio && UnicornStudio.addScene)
          ? cb()
          : requestAnimationFrame(()=>ready(cb));
      }
      const dpi = () => Math.min(3, Math.max(1, window.devicePixelRatio || 1));

      let scene = null;
      ready(async () => {
        try {
          scene = await UnicornStudio.addScene({
            elementId: "host",
            filePath: FILE_URL,
            fps: 60,
            scale: 1,
            dpi: dpi(),
            lazyLoad: false,
            altText: "notbad — logo animation 2",
            ariaLabel: "Animated notbad logo 2",
            interactivity: { mouse: { disableMobile: false, disabled: false } }
          });
          requestAnimationFrame(()=>{ try { scene.resize(); } catch(e){} });
          window.addEventListener("resize", ()=>{ try { scene.resize(); } catch(e){} });
        } catch (err) {
          console.error("[Unicorn] addScene failed:", err);
        }
      });

      // Keep crisp on DPR change
      let last = window.devicePixelRatio || 1;
      setInterval(()=>{ const d = window.devicePixelRatio || 1;
        if (Math.abs(d - last) > 0.01){
          last = d;
          try { scene?.destroy?.(); } catch {}
          scene = null;
          ready(async ()=>{
            try {
              scene = await UnicornStudio.addScene({
                elementId:"host", filePath: FILE_URL, fps:60, scale:1, dpi:d, lazyLoad:false
              });
              requestAnimationFrame(()=>{ try { scene.resize(); } catch(e){} });
            } catch (err) {
              console.error("[Unicorn] re-addScene failed:", err);
            }
          });
        }
      }, 600);
    })();
  </script>
</body>
</html>
